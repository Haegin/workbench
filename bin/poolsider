#!/bin/sh -x

# requirements; python3, curl, scdl (https://github.com/flyingrub/scdl)
#   brew install python3 curl
#   pip3 install scdl

# prep folders for downloads
cd ~/Downloads

# download all tracks (or new tracks added to these playlists)
scdl -l https://soundcloud.com/matt_hutchinson/sets/poolside-fm -c --hidewarnings
osascript /Users/matt/Dropbox/add_to_playlist.scpt "Poolside.FM (best of)" "alderann:Users:matt:Downloads:Poolside.FM (best of):" > /dev/null

scdl -l https://soundcloud.com/matt_hutchinson/sets/fffffounnd-tracks -c --hidewarnings
osascript /Users/matt/Dropbox/add_to_playlist.scpt "FFFFFOUNND Tracks" "alderann:Users:matt:Downloads:FFFFFOUNND Tracks:" > /dev/null

mkdir -p soundcloud_likes
scdl -l https://soundcloud.com/matt_hutchinson -fc --path ./soundcloud_likes
osascript /Users/matt/Dropbox/add_to_playlist.scpt "SoundCloud Likes" "alderann:Users:matt:Downloads:soundcloud_likes" > /dev/null

# all poolside
# curl -s http://poolsideapi2.herokuapp.com/tracks?p=2 | grep -o '"scUrl": ".*",$' | sed -E 's/("scUrl": "|",.*$)//g' | xargs -I 'url' scdl -l url --hidewarnings --path ./poolside.fm-feed
