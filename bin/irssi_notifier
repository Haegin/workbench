#!/bin/sh

# OSX notifications for irssi screen sessions
# http://matthewhutchinson.net/2010/8/21/irssi-screen-fnotify-and-growl-on-osx
# (requires terminal-notifier gem)

(ssh irssi-server -o PermitLocalCommand=no         \
  ": > .irssi/fnotify ; tail -f .irssi/fnotify " | \
while read heading message; do                     \
  /Users/$USER/.rbenv/shims/terminal-notifier -title "${heading}" -message "$(echo "${message}" | sed 's/[\<|\>]//g')"; \
done)
